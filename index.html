<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatGPT Bot</title>
    <link rel="stylesheet" href="opo.css">
    <style>
        /* Add some styling for the Wikipedia image */
        .wiki-image {
            max-width: 200px;  /* Ensure the image doesn't exceed a specific width */
            max-height: 150px; /* Restrict the image height to maintain layout */
            width: auto;       /* Maintain aspect ratio */
            height: auto;      /* Maintain aspect ratio */
            display: block;    /* Display as block element to ensure it's on a new line */
            margin: 10px 0;    /* Add some margin for better spacing */
            border-bottom-right-radius: 7px;
            border-bottom-left-radius: 7px;
        }

      

    </style>
</head>
<body>
    <div class="topographic-texture">
        <div class="en">
            <i class="fa-solid fa-chevron-left">
                <div class="black"></div>
            </i>

            <div class="lr">
                <h1>Mobo bot</h1>
                <div class="frt">
                    <div class="green"></div>
                    Online
                </div>
            </div>
            <video src="juy.mp4" autoplay muted loop></video>
        </div>
    

    <div class="container">
        <div class="chat-box" id="chat-box">
            <div class="top-message">
                <img src="YHKLTK.png" alt="">
                <p>Hello! This Bot provides you with information from the internet. Write (only one word) of the topic to get information.</p>
            
        </div><br>
        <div class="uy">
            <div class="logo" d>
                
            </div>
            <div class="bot-message" style="padding: 1px;
            margin-bottom: 0px;
            margin-top: -54px;
            font-size: 11px;
            margin-left: 71px;">
                <p style="margin-left: 10px;">Please type a topic you'd like to know more about!</p>
            </div>
        </div>
        <div id="calculator" class="calculator" style="display:none;">
            <input type="text" id="calc-display" class="calc-display" disabled>
            <div class="calc-buttons">
                <button onclick="insert(7)">7</button>
                <button onclick="insert(8)">8</button>
                <button onclick="insert(9)">9</button>
                <button onclick="clearDisplay()">C</button>
                <button onclick="insert(4)">4</button>
                <button onclick="insert(5)">5</button>
                <button onclick="insert(6)">6</button>
                <button onclick="operate('/')">/</button>
                <button onclick="insert(1)">1</button>
                <button onclick="insert(2)">2</button>
                <button onclick="insert(3)">3</button>
                <button onclick="operate('*')">*</button>
                <button onclick="insert(0)">0</button>
                <button onclick="operate('-')">-</button>
                <button onclick="operate('+')">+</button>
                <button onclick="calculate()">=</button>
            </div>
        </div>
        
       </div>
       </div>
        
        <div class="chat-container">
            <input type="text" id="user-input" placeholder="Start a new chat..." />
            <button onclick="sendMessage()" id="send-btn">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 21L23 12L2 3V10L17 12L2 14V21Z" fill="currentColor"/>
                </svg>
            </button>
        </div>
    </div>
</div>
<script>
    

function displayUserMessage(message) {
    var chatBox = document.getElementById("chat-box");
    var userMessageDiv = document.createElement("div");
    userMessageDiv.className = "user-message";
    userMessageDiv.textContent = message;
    chatBox.appendChild(userMessageDiv);
    document.getElementById("user-input").value = "";
}

function displayLoadingMessage() {
    var chatBox = document.getElementById("chat-box");
    var loadingMessageDiv = document.createElement("div");
    loadingMessageDiv.className = "loading-message";
    loadingMessageDiv.textContent = "    Loading...";
    loadingMessageDiv.id = "loading-message";
    chatBox.appendChild(loadingMessageDiv);
}

function removeLoadingMessage() {
    var loadingMessage = document.getElementById("loading-message");
    if (loadingMessage) {
        loadingMessage.remove();
    }
}

// Object to manage predefined responses


async function getBotResponse(query) {
    // Check if the query matches a predefined response
    if (predefinedResponses[query]) {
        displayBotMessage("Answer", predefinedResponses[query]);
        removeLoadingMessage(); // Remove loading message when bot responds
        return;
    }

    // First attempt to get information from Wikipedia
    try {
        let response = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${query}`);
        let data = await response.json();

        if (data.extract) {
            let imageUrl = data.thumbnail ? data.thumbnail.source : null;  // Check if image is available
            displayBotMessage(data.title, data.extract, imageUrl);  // Pass Wikipedia title and extract
        } else {
            // If Wikipedia doesn't provide information, display custom fallback messages
            displayFallbackMessage();
        }
    } catch (error) {
        console.error('Error fetching from Wikipedia:', error);
        displayBotMessage("Error", "Oops! Something went wrong while fetching from Wikipedia.");
    }
}

function displayFallbackMessage() {
    const fallbackMessages = [
        "It looks like there's no information available on this topic. Why not try another word?",
        "I'm sorry, I couldn't find anything. How about searching for something else?",
        "Hmmm, it seems this topic is tricky. Maybe try exploring a different topic?",
        "No info found on that. Did you know the Eiffel Tower can be 15 cm taller in the summer due to heat expansion?"
    ];

    // Select a random fallback message from the array
    let randomIndex = Math.floor(Math.random() * fallbackMessages.length);
    displayBotMessage("Fallback", fallbackMessages[randomIndex]);
}

function displayBotMessage(title, message, imageUrl = null) {
    var chatBox = document.getElementById("chat-box");
    removeLoadingMessage(); // Remove loading message when bot responds

    // Create container for bot response and logo (uy)
    var uyContainer = document.createElement("div");
    uyContainer.className = "uy";

    // Create logo div and append robot image
    var logoDiv = document.createElement("div");
    logoDiv.className = "logo";
    var botImage = document.createElement("img");
    botImage.src = "";  // path to your robot image
    botImage.className = "bot-logo";
    logoDiv.appendChild(botImage);

    // Create bot message div
    var botMessageDiv = document.createElement("div");
    botMessageDiv.className = "bot-message";

    // Add heading for the Wikipedia title or answer
    var topicHeading = document.createElement("h2");
    topicHeading.textContent = title;
    botMessageDiv.appendChild(topicHeading);

    // Add bot message text
    var botText = document.createElement("p");
    botText.textContent = message;
    botMessageDiv.appendChild(botText);

    // If image URL is provided, append it to the bot message div
    if (imageUrl) {
        var botImg = document.createElement("img");
        botImg.src = imageUrl;
        botImg.className = "wiki-image";  // Use the new CSS class for styling
        botMessageDiv.appendChild(botImg);
    }

    // Append logo and bot message into the container
    uyContainer.appendChild(logoDiv);
    uyContainer.appendChild(botMessageDiv);

    // Append container to chatbox
    chatBox.appendChild(uyContainer);
} window.scrollTo(0, document.body.scrollHeight);

function displayBotMessage(title, message, imageUrl = null) {
    var chatBox = document.getElementById("chat-box");
    removeLoadingMessage(); // Remove loading message when bot responds

    // Create container for bot response and logo (uy)
    var uyContainer = document.createElement("div");
    uyContainer.className = "uy";

    // Create logo div and append robot image
    var logoDiv = document.createElement("div");
    logoDiv.className = "logo";
    var botImage = document.createElement("img");
    botImage.src = "";  // path to your robot image
    botImage.className = "bot-logo";
    logoDiv.appendChild(botImage);

    // Create bot message div
    var botMessageDiv = document.createElement("div");
    botMessageDiv.className = "bot-message";

    // Add heading for the Wikipedia title or answer
    var topicHeading = document.createElement("h2");
    topicHeading.textContent = title;
    botMessageDiv.appendChild(topicHeading);

    // Add bot message text
    var botText = document.createElement("p");
    botText.textContent = message;
    botMessageDiv.appendChild(botText);

    // If image URL is provided, append it to the bot message div
    if (imageUrl) {
        var botImg = document.createElement("img");
        botImg.src = imageUrl;
        botImg.className = "wiki-image";  // Use the new CSS class for styling
        botMessageDiv.appendChild(botImg);
    }

    // Append logo and bot message into the container
    uyContainer.appendChild(logoDiv);
    uyContainer.appendChild(botMessageDiv);

    // Append container to chatbox
    chatBox.appendChild(uyContainer);

    // Scroll to the bottom
    chatBox.scrollTop = chatBox.scrollHeight;
}
document.getElementById("user-input").addEventListener("keydown", function(event) {
    if (event.key === "Enter") {
        event.preventDefault(); // Prevent form submission if inside a form
        sendMessage(); // Call the sendMessage function
    }
});

async function sendMessage() {
    var userInput = document.getElementById("user-input").value;
    if (userInput.trim() === "") return; // Prevent empty submissions
    displayUserMessage(userInput);
    displayLoadingMessage(); // Show loading message
    await getBotResponse(userInput); // Wait for bot response
}

function displayUserMessage(message) {
    var chatBox = document.getElementById("chat-box");
    var userMessageDiv = document.createElement("div");
    userMessageDiv.className = "user-message";
    userMessageDiv.textContent = message;
    chatBox.appendChild(userMessageDiv);
    document.getElementById("user-input").value = ""; // Clear input field after submitting
    chatBox.scrollTop = chatBox.scrollHeight; // Scroll to bottom
}


</script>
<script>
   // Function to normalize user input (remove trailing punctuation, extra spaces, and make lowercase)
function normalizeInput(input) {
    // Convert input to lowercase, trim whitespace, and remove trailing punctuation like '?', '.', or '!'
    return input.trim().toLowerCase().replace(/[?!.]*$/, '');
}

async function sendMessage() {
    var userInput = document.getElementById("user-input").value;
    if (userInput.trim() === "") return; // Prevent empty submissions

    displayUserMessage(userInput);
    displayLoadingMessage(); // Show loading message

    await getBotResponse(userInput); // Wait for bot response
}

function displayUserMessage(message) {
    var chatBox = document.getElementById("chat-box");
    var userMessageDiv = document.createElement("div");
    userMessageDiv.className = "user-message";
    userMessageDiv.textContent = message;
    chatBox.appendChild(userMessageDiv);
    document.getElementById("user-input").value = ""; // Clear input field after submitting
    chatBox.scrollTop = chatBox.scrollHeight; // Scroll to bottom
}

function displayLoadingMessage() {
    var chatBox = document.getElementById("chat-box");
    var loadingMessageDiv = document.createElement("div");
    loadingMessageDiv.className = "loading-message";
    loadingMessageDiv.textContent = "Loading...";
    loadingMessageDiv.id = "loading-message";
    chatBox.appendChild(loadingMessageDiv);
    chatBox.scrollTop = chatBox.scrollHeight; // Scroll to bottom
}

function removeLoadingMessage() {
    var loadingMessage = document.getElementById("loading-message");
    if (loadingMessage) {
        loadingMessage.remove();
    }
}

// Predefined responses
const predefinedResponses = {
    "hi": "Hello! How can I help you today?",
    "hello": "Hi there! How can I assist you?",
    "hey": "Hey! What can I do for you?",
    "hi there": "Hi! How's your day going?",
    "good morning": "Good morning! How can I assist you today?",
    "good afternoon": "Good afternoon! What can I help you with?",
    "good evening": "Good evening! Feel free to ask me anything.",
    "good night": "Good night! Let me know if you need anything before heading to bed.",
    
    "how are you": "I'm just a bot, but I'm here to help you!",
    "how are you doing": "I'm doing great! How about you?",
    "how’s it going": "I’m here to assist you. How about you?",
    "what’s up": "Not much! Just ready to help. What can I do for you?",
    "tell me something": "Did you know that honey never spoils? Archaeologists have found pots of honey in ancient Egyptian tombs that are over 3,000 years old and still perfectly edible.",
    "ok": "Got it! Let me know if you need anything else.",
    "yes": "Great! If you need anything, I'm here.",
    "no": "That's fine! Feel free to ask me anything.",
    "i’ll do that now": "Awesome! Let me know if you need help.",
    
    "thank you": "You're welcome! I'm happy to help.",
    "thanks": "Anytime! I'm here to assist.",
    "goodbye": "Goodbye! Have a wonderful day.",
    "bye": "Bye! Take care!",
    "see you later": "See you later! I'm always here when you need help.",
    
    "how can you help me": "I can answer questions, provide information, and assist you with tasks. How can I help?",
    "what can you do": "I can assist with a wide range of tasks and answer questions. Just ask!",
    "can you help me": "Of course! What do you need help with?",
    "i have a question": "Feel free to ask your question, and I’ll do my best to help!",
    
    "do you know a joke": "Sure! Why don't scientists trust atoms? Because they make up everything!",
    "tell me a joke": "Why did the computer go to therapy? Because it had too many bytes of issues!",
    "you’re funny": "Thanks! I'm always here for a laugh.",
    "do you love me": "I’m here to assist and support you, but love is beyond my programming!",
    "i love you": "That’s sweet! While I can’t feel love, I’m always here to help you.",
    "will you marry me": "I’m flattered, but I’m just a bot built to assist!"
    
};

async function getBotResponse(query) {
    let normalizedQuery = normalizeInput(query);

    // Check for predefined responses
    if (predefinedResponses[normalizedQuery]) {
        displayBotMessage("Answer", predefinedResponses[normalizedQuery]);
        removeLoadingMessage(); // Remove loading message when bot responds
        return;
    }

    // Fallback if no predefined response is found
    try {
        let response = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${normalizedQuery}`);
        let data = await response.json();

        if (data.extract) {
            let imageUrl = data.thumbnail ? data.thumbnail.source : null;
            displayBotMessage(data.title, data.extract, imageUrl);
        } else {
            displayFallbackMessage();
        }
    } catch (error) {
        console.error('Error fetching from Wikipedia:', error);
        displayBotMessage("Error", "Oops! Something went wrong while fetching from Wikipedia.");
    }
}

function displayBotMessage(title, message, imageUrl = null) {
    var chatBox = document.getElementById("chat-box");
    removeLoadingMessage();

    var uyContainer = document.createElement("div");
    uyContainer.className = "uy";

    var logoDiv = document.createElement("div");
    logoDiv.className = "logo";
    var botImage = document.createElement("img");
    botImage.src = ""; // path to your robot image
    botImage.className = "bot-logo";
    logoDiv.appendChild(botImage);

    var botMessageDiv = document.createElement("div");
    botMessageDiv.className = "bot-message";

    var topicHeading = document.createElement("h2");
    topicHeading.textContent = title;
    botMessageDiv.appendChild(topicHeading);

    var botText = document.createElement("p");
    botText.textContent = message;
    botMessageDiv.appendChild(botText);

    if (imageUrl) {
        var botImg = document.createElement("img");
        botImg.src = imageUrl;
        botImg.className = "wiki-image";
        botMessageDiv.appendChild(botImg);
    }

    uyContainer.appendChild(logoDiv);
    uyContainer.appendChild(botMessageDiv);

    chatBox.appendChild(uyContainer);
    chatBox.scrollTop = chatBox.scrollHeight;
}

function displayFallbackMessage() {
    const fallbackMessages = [
        "I couldn't find information on this topic. Please try something else.",
        "Sorry, no info available. Try searching for something else.",
        "It seems that I couldn't find what you're looking for."
    ];

    let randomIndex = Math.floor(Math.random() * fallbackMessages.length);
    displayBotMessage("Fallback", fallbackMessages[randomIndex]);
}

document.getElementById("user-input").addEventListener("keydown", function (event) {
    if (event.key === "Enter") {
        event.preventDefault(); // Prevent form submission if inside a form
        sendMessage(); // Call the sendMessage function
    }
});


</script>

<script>
    // Rename predefined responses to responseDictionary
const responseDictionary = {
    "hi": "Hello! How can I help you today?",
    "i want a calculator": "Sure! Here's a calculator for you.",
    "calculator disappear": "The calculator has been hidden.",
    "disappear calculator": "The calculator has been hidden."
};

function toggleCalculator(shouldShow) {
    const calculator = document.getElementById('calculator');
    calculator.style.display = shouldShow ? 'block' : 'none';
}

function normalizeInput(input) {
    // Convert input to lowercase, trim whitespace, and remove trailing punctuation like '?', '.', or '!'
    return input.trim().toLowerCase().replace(/[?!.]*$/, '');
}

async function getBotResponse(query) {
    let normalizedQuery = normalizeInput(query);

    // Check for specific commands related to the calculator
    if (normalizedQuery === "i want a calculator") {
        displayBotMessage("Answer", responseDictionary[normalizedQuery]);
        toggleCalculator(true);  // Show calculator
        removeLoadingMessage();
        return;
    } else if (normalizedQuery === "calculator disappear" || normalizedQuery === "disappear calculator") {
        displayBotMessage("Answer", responseDictionary[normalizedQuery]);
        toggleCalculator(false);  // Hide calculator
        removeLoadingMessage();
        return;
    }

    // Check for predefined responses
    if (responseDictionary[normalizedQuery]) {
        displayBotMessage("Answer", responseDictionary[normalizedQuery]);
        removeLoadingMessage();
        return;
    }

    // Attempt to get information from Wikipedia
    try {
        let response = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${normalizedQuery}`);
        let data = await response.json();

        if (data.extract) {
            let imageUrl = data.thumbnail ? data.thumbnail.source : null;
            displayBotMessage(data.title, data.extract, imageUrl);
        } else {
            displayFallbackMessage();
        }
    } catch (error) {
        console.error('Error fetching from Wikipedia:', error);
        displayBotMessage("Error", "Oops! Something went wrong while fetching from Wikipedia.");
    }
}

function displayFallbackMessage() {
    const fallbackMessages = [
        "I couldn't find information on this topic. Please try something else.",
        "Sorry, no info available. Try searching for something else.",
        "It seems that I couldn't find what you're looking for."
    ];

    let randomIndex = Math.floor(Math.random() * fallbackMessages.length);
    displayBotMessage("Fallback", fallbackMessages[randomIndex]);
}

function displayBotMessage(title, message, imageUrl = null) {
    var chatBox = document.getElementById("chat-box");
    removeLoadingMessage();

    var uyContainer = document.createElement("div");
    uyContainer.className = "uy";

    var logoDiv = document.createElement("div");
    logoDiv.className = "logo";
    var botImage = document.createElement("img");
    botImage.src = ""; // path to your robot image
    botImage.className = "bot-logo";
    logoDiv.appendChild(botImage);

    var botMessageDiv = document.createElement("div");
    botMessageDiv.className = "bot-message";

    var topicHeading = document.createElement("h2");
    topicHeading.textContent = title;
    botMessageDiv.appendChild(topicHeading);

    var botText = document.createElement("p");
    botText.textContent = message;
    botMessageDiv.appendChild(botText);

    if (imageUrl) {
        var botImg = document.createElement("img");
        botImg.src = imageUrl;
        botImg.className = "wiki-image";
        botMessageDiv.appendChild(botImg);
    }

    uyContainer.appendChild(logoDiv);
    uyContainer.appendChild(botMessageDiv);

    chatBox.appendChild(uyContainer);
    chatBox.scrollTop = chatBox.scrollHeight;
}

function displayUserMessage(message) {
    var chatBox = document.getElementById("chat-box");
    var userMessageDiv = document.createElement("div");
    userMessageDiv.className = "user-message";
    userMessageDiv.textContent = message;
    chatBox.appendChild(userMessageDiv);
    document.getElementById("user-input").value = ""; // Clear input field after submitting
    chatBox.scrollTop = chatBox.scrollHeight; // Scroll to bottom
}

function displayLoadingMessage() {
    var chatBox = document.getElementById("chat-box");
    var loadingMessageDiv = document.createElement("div");
    loadingMessageDiv.className = "loading-message";
    loadingMessageDiv.textContent = "Loading...";
    loadingMessageDiv.id = "loading-message";
    chatBox.appendChild(loadingMessageDiv);
    chatBox.scrollTop = chatBox.scrollHeight; // Scroll to bottom
}

function removeLoadingMessage() {
    var loadingMessage = document.getElementById("loading-message");
    if (loadingMessage) {
        loadingMessage.remove();
    }
}

document.getElementById("user-input").addEventListener("keydown", function (event) {
    if (event.key === "Enter") {
        event.preventDefault();
        sendMessage();
    }
});

async function sendMessage() {
    var userInput = document.getElementById("user-input").value;
    if (userInput.trim() === "") return; // Prevent empty submissions
    displayUserMessage(userInput);
    displayLoadingMessage(); // Show loading message
    await getBotResponse(userInput); // Wait for bot response
}

</script>
    <script src="https://kit.fontawesome.com/4748bef489.js" crossorigin="anonymous"></script>
</body>
</html>
