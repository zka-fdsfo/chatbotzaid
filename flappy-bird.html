<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Flappy Bird</title>
    <link rel="stylesheet" href="style.css">
    <script src="app.js" charset="utf-8"></script>
    <style>
        body {
    display: flex;
    zoom: 0.7;
    
}
.bird {
    transition: bottom 150ms;
}

.game-container {
    width: 500px;
    height: 730px;
    position: absolute;
    left: 0px;
    transition: 1ms;
}

.border-left {
    width: 80px;
    height: 790px;
    position:  absolute;
    background-color: white;
    z-index: +2;
}

.border-right {
    width: 80px;
    height: 790px;
    position: absolute;
    background-color: white;
    z-index: +2;
    left: 580px;
}

.border-top {
    width: 660px;
    height: 50px;
    position:  absolute;
    background-color: white;
    z-index: +2;
    top: -50px;
}

.sky {
  
    width: 500px;
    height: 580px;
    position: absolute;
    background-size: cover;
    animation: op 40s infinite alternate-reverse;
    transition: revert-layer 2s;
}
@keyframes op {
   
    0%{
        background-image: url("gp (4).gif");
    }
    50%{
        background-image: url('gp (2).gif');
    }
    100%{
        background-image: url('gp (1).gif');
    }
}

.ground {
    background-image: url('bottom-background.png');
    width: 500px;
    height: 150px;
    position: absolute;
    top: 580px;
    z-index: +1;
}

.bird {
    background-image: url('lili-unscreen.gif');
    background-size: cover;
    position: absolute;
    width: 45px;
    height: 45px;
    left: 220px;
    bottom: 100px;
    transition: 1ms;
      background-color: transparent;
      border-radius: 50%;
}

.obstacle {
    background-image: url('ut.png');
    width: 72px;
    height: 300px;
    position: absolute;
    transition: 1ms;
}

.topObstacle {
    background-image: url('ut.png');
    transform: rotate(180deg);
    width: 72px;
    height: 300px;
    position: absolute;
    transition: 1ms;
}

@keyframes slideright {
    from {
        background-position: 10000%;
    }
    to {
        background-position: 0%;
    }
  }
  
  @-webkit-keyframes slideright {
    from {
        background-position: 10000%;
    }
    to {
        background-position: 0%;
    }
  }

  .ground-container {
      height: 150px;
      width: 580px;
      left: 0px;
      position:  absolute;
  }
  
  .ground-moving {
    position: absolute;
    top: 580px;
    height: 150px;
    background-image: url('bottom-background.png');
    background-repeat: repeat-x;
    animation: slideright 100s infinite linear;
    -webkit-animation: slideright 100s infinite linear;
    width: 100%;
    z-index: +1;
  }

  /* Style for the score and restart button */
  .score {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 24px;
    font-weight: bold;
    z-index: 10;
    color: white;
  }

  .restart-button {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 10px 20px;
    font-size: 18px;
    background-color: rgb(0, 255, 0);
    color: white;
    border: none;
    cursor: pointer;
    display: none;
    z-index: 10;
    
  }

    </style>
  </head>
  <body>

  
  <div class="game-container">
      <div class="border-top"></div>
      <div class="sky">
          <div class="bird"></div>
      </div>
      <div class="score">Score: 0</div>
      <button class="restart-button">Restart</button>
  </div>
  <div class="ground-container">
    <div class="ground-moving"></div>
  </div>
  
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const bird = document.querySelector('.bird')
    const gameDisplay = document.querySelector('.game-container')
    const ground = document.querySelector('.ground-moving')
    const scoreElement = document.querySelector('.score')
    const restartButton = document.querySelector('.restart-button')

    let birdLeft = 220
    let birdBottom = 200
    let gravity = 0.1
    let isGameOver = false
    let gap = 450
    let score = 0
    let lift = 3
    let velocity = 1
    let obstacleSpeed = 2; // Initial speed of the obstacles

    // Smooth gravity and velocity application
    function startGame() {
        velocity -= gravity
        birdBottom += velocity

        // Prevent the bird from going below the ground
        if (birdBottom < 0) {
            birdBottom = 0
            velocity = 0
        }

        bird.style.bottom = birdBottom + 'px'
    }

    // Update jump function for smooth upward movement
    function jump() {
        velocity = lift
    }

    // Control with spacebar or tap for mobile
    function control(e) {
        if (e.keyCode === 30) {
            jump()
        }
    }

    document.addEventListener('touchstart', jump)
    document.addEventListener('keyup', control)

    // Start the game loop
    let gameTimerId = setInterval(startGame, 20)

    function updateScore() {
        score++
        scoreElement.textContent = 'Score: ' + score

        // Adjust game speed based on score
        if (score >= 15 && score < 25) {
            obstacleSpeed = 3 // Speed up after score of 15
        } else if (score >= 25 && score < 40) {
            obstacleSpeed = 4 // Speed up more after score of 25
        } else if (score >= 40) {
            obstacleSpeed = 5 // Keep increasing speed for more challenge
        }
    }

    function generateObstacle() {
        let obstacleLeft = 400
        let randomHeight = Math.random() * 90
        let obstacleBottom = randomHeight
        const obstacle = document.createElement('div')
        const topObstacle = document.createElement('div')

        if (!isGameOver) {
            obstacle.classList.add('obstacle')
            topObstacle.classList.add('topObstacle')
        }

        gameDisplay.appendChild(obstacle)
        gameDisplay.appendChild(topObstacle)
        obstacle.style.left = obstacleLeft + 'px'
        topObstacle.style.left = obstacleLeft + 'px'
        obstacle.style.bottom = obstacleBottom + 'px'
        topObstacle.style.bottom = obstacleBottom + gap + 'px'

        function moveObstacle() {
            obstacleLeft -= obstacleSpeed // Adjust speed based on current value
            obstacle.style.left = obstacleLeft + 'px'
            topObstacle.style.left = obstacleLeft + 'px'

            if (obstacleLeft === -90) {
                clearInterval(timerId)
                gameDisplay.removeChild(obstacle)
                gameDisplay.removeChild(topObstacle)
                updateScore()
            }

            if (
                obstacleLeft > 200 && obstacleLeft < 280 && birdLeft === 220 &&
                (birdBottom < obstacleBottom + 153 || birdBottom > obstacleBottom + gap - 200) ||
                birdBottom === 0
            ) {
                gameOver()
                clearInterval(timerId)
            }
        }

        let timerId = setInterval(moveObstacle, 20)
        if (!isGameOver) setTimeout(generateObstacle, 3000)
    }

    generateObstacle()

    function gameOver() {
        clearInterval(gameTimerId)
        console.log('game over')
        isGameOver = true
        document.removeEventListener('keyup', control)
        ground.classList.add('ground')
        ground.classList.remove('ground-moving')
        restartButton.style.display = 'block'
    }

    // Restart the game when the button is clicked
    restartButton.addEventListener('click', () => {
        location.reload()
    })
})

</script>
  </body>
</html>
